---
import { getImageSpotify } from "../utils";

const { review } = Astro.props;

const dateRelease = new Date(review.data.releaseDate).toLocaleDateString(
    "en-US",
    {
        day: "numeric",
        month: "short",
        year: "numeric",
    },
);

const dateReviewed = new Date(review.data.reviewDate).toLocaleDateString(
    "en-US",
    {
        day: "numeric",
        month: "short",
        year: "numeric",
    },
);


const spotifyImg = await getImageSpotify(review.data.spotifyID, "id")
const img = spotifyImg ? spotifyImg : review.data.img;
---

<a
    href=`../reviews/${review.id}`
    class=`h-full group transition-all ease-in-out transform shadow-2xl text-white w-full bg-zinc-800 hover:bg-zinc-700 rounded-2xl px-4 md:px-8 py-4 hover:shadow-xl dark:hover:shadow-black/30 hover:scale-105`
>
    <article class="flex flex-row w-full items-center justify-between">
        <div class="flex flex-col w-6/12 md:w-10/12">
            <h2 transition:name=`title-${review.id}` class="text-2xl line-clamp-2 md:text-3xl">{review.data.title}</h2>
            <p transition:name=`artists-${review.id}` class="text-lg font-thin line-clamp-1">
                {review.data.artists.join(", ")}
            <p/>
            <p class="capitalize">{review.data.type}</p>
            <div class="flex gap-2">
                <p>{dateRelease}</p>
                <span>Â·</span>
                <p>Reviewed on {dateReviewed}</p>
            </div>
        </div>
        <div class="flex flex-row">
            <img
                src={img}
                class="w-36"
                transition:name=`image-${review.id}`
            />
        </div>
    </article>
</a>
